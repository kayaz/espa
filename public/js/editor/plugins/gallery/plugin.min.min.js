tinymce.PluginManager.add("gallery",function(editor,url){var openDialog=function(){var win;win=editor.windowManager.open({title:"Wstaw galerię",file:tinyMCE.baseURL+"/plugins/gallery/dialog.php?editor="+editor.id+"&lang="+tinymce.settings.language+"&subfolder="+tinymce.settings.subfolder,body:{type:"panel",classes:"myClassname",items:[{type:"htmlpanel",html:'<link href="'+tinyMCE.baseURL+'/plugins/gallery/css/bootstrap.css" rel="stylesheet" type="text/css" />\n'+'<script type="text/javascript" src="js/jquery.min.js"><\/script>\n'+'<script type="text/javascript" src="js/bootstrap.bundle.min.js"><\/script>\n'+'<script type="text/javascript" src="js/popper.min.js"><\/script>'+'<div id="gallery"></div>'}]},size:"large",buttons:[]});$.ajax({type:"GET",url:"/admin/ajaxGetGalleries",success:function(result){$.each(result,function(i,item){$('<div class="col-3">'+'<div class="card">'+'<div class="card-body">'+'<h5 class="card-title">'+item.name+"</h5>"+'<div class="dropdown">'+'<button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Wstaw jako </button>'+'<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">'+'<span class="dropdown-item" data-type="gallery">Galeria</span>'+'<span class="dropdown-item" data-type="carousel">Karuzela</span>'+'<span class="dropdown-item" data-type="slider">Slider</span>'+"</div>"+"</div>"+"</div>"+"</div>"+"</div>").appendTo("#gallery");$(".dropdown-item").on("click",function(){const type=$(this).attr("data-type");tinymce.activeEditor.execCommand("mceInsertContent",false,"<p>[galeria="+type+"]"+item.id+"[/galeria]</p>");editor.windowManager.close()})})},error:function(){alert("Wystąpił błąd połączenia z bazą")}})};editor.ui.registry.addButton("gallery",{icon:"image",tooltip:"Wstaw galerię",onAction:function(){openDialog()}})});